<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GapiConfig (gapi-ocaml.GapiConfig)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">gapi-ocaml</a> &#x00BB; GapiConfig</nav><h1>Module <code>GapiConfig</code></h1><p>Configuration module.</p><p>Configures Ocurl and authorization method.</p></header><dl><dt class="spec type" id="type-debug_function"><a href="#type-debug_function" class="anchor"></a><code><span class="keyword">type</span> debug_function</code><code> = </code><table class="variant"><tr id="type-debug_function.Standard" class="anchored"><td class="def constructor"><a href="#type-debug_function.Standard" class="anchor"></a><code>| </code><code><span class="constructor">Standard</span></code></td><td class="doc"><p>Standard debug function that prints everything on standard output.</p></td></tr><tr id="type-debug_function.Custom" class="anchored"><td class="def constructor"><a href="#type-debug_function.Custom" class="anchor"></a><code>| </code><code><span class="constructor">Custom</span> <span class="keyword">of</span> Curl.t <span>&#45;&gt;</span> Curl.curlDebugType <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></td><td class="doc"><p>Custom debug function.</p></td></tr></table></dt><dd><p>Curl debug function used to log server interactions.</p></dd></dl><dl><dt class="spec type" id="type-client_login_config"><a href="#type-client_login_config" class="anchor"></a><code><span class="keyword">type</span> client_login_config</code><code> = </code><code>{</code><table class="record"><tr id="type-client_login_config.username" class="anchored"><td class="def field"><a href="#type-client_login_config.username" class="anchor"></a><code>username : string;</code></td><td class="doc"><p>Username of the Google account.</p></td></tr><tr id="type-client_login_config.password" class="anchored"><td class="def field"><a href="#type-client_login_config.password" class="anchor"></a><code>password : string;</code></td><td class="doc"><p>Password of the Google account.</p></td></tr></table><code>}</code></dt><dd><p>Client Login parameters.</p></dd></dl><dl><dt class="spec value" id="val-username"><a href="#val-username" class="anchor"></a><code><span class="keyword">val</span> username : <span><span>(<a href="index.html#type-client_login_config">client_login_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Client Login username lens.</p></dd></dl><dl><dt class="spec value" id="val-password"><a href="#val-password" class="anchor"></a><code><span class="keyword">val</span> password : <span><span>(<a href="index.html#type-client_login_config">client_login_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Client Login password lens.</p></dd></dl><dl><dt class="spec type" id="type-oauth1_config"><a href="#type-oauth1_config" class="anchor"></a><code><span class="keyword">type</span> oauth1_config</code><code> = </code><code>{</code><table class="record"><tr id="type-oauth1_config.signature_method" class="anchored"><td class="def field"><a href="#type-oauth1_config.signature_method" class="anchor"></a><code>signature_method : <a href="../GapiCore/SignatureMethod/index.html#type-t">GapiCore.SignatureMethod.t</a>;</code></td><td class="doc"><p>Signature method used to sign requests. (<code>HMAC_SHA1</code> is the only supported method)</p></td></tr><tr id="type-oauth1_config.consumer_key" class="anchored"><td class="def field"><a href="#type-oauth1_config.consumer_key" class="anchor"></a><code>consumer_key : string;</code></td><td class="doc"><p>Consumer key.</p></td></tr><tr id="type-oauth1_config.consumer_secret" class="anchored"><td class="def field"><a href="#type-oauth1_config.consumer_secret" class="anchor"></a><code>consumer_secret : string;</code></td><td class="doc"><p>Consumer secret.</p></td></tr></table><code>}</code></dt><dd><p>OAuth 1.0a parameters.</p></dd></dl><dl><dt class="spec value" id="val-signature_method"><a href="#val-signature_method" class="anchor"></a><code><span class="keyword">val</span> signature_method : <span><span>(<a href="index.html#type-oauth1_config">oauth1_config</a>, <a href="../GapiCore/SignatureMethod/index.html#type-t">GapiCore.SignatureMethod.t</a>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth1 signature method lens.</p></dd></dl><dl><dt class="spec value" id="val-consumer_key"><a href="#val-consumer_key" class="anchor"></a><code><span class="keyword">val</span> consumer_key : <span><span>(<a href="index.html#type-oauth1_config">oauth1_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth1 consumer key lens.</p></dd></dl><dl><dt class="spec value" id="val-consumer_secret"><a href="#val-consumer_secret" class="anchor"></a><code><span class="keyword">val</span> consumer_secret : <span><span>(<a href="index.html#type-oauth1_config">oauth1_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth1 consumer secret lens.</p></dd></dl><dl><dt class="spec type" id="type-oauth2_config"><a href="#type-oauth2_config" class="anchor"></a><code><span class="keyword">type</span> oauth2_config</code><code> = </code><code>{</code><table class="record"><tr id="type-oauth2_config.client_id" class="anchored"><td class="def field"><a href="#type-oauth2_config.client_id" class="anchor"></a><code>client_id : string;</code></td><td class="doc"><p>Client ID.</p></td></tr><tr id="type-oauth2_config.client_secret" class="anchored"><td class="def field"><a href="#type-oauth2_config.client_secret" class="anchor"></a><code>client_secret : string;</code></td><td class="doc"><p>Client secret.</p></td></tr><tr id="type-oauth2_config.refresh_access_token" class="anchored"><td class="def field"><a href="#type-oauth2_config.refresh_access_token" class="anchor"></a><code>refresh_access_token : <span><span>(unit <span>&#45;&gt;</span> string)</span> option</span>;</code></td><td class="doc"><p>Optional external function used to get new access tokens.</p></td></tr></table><code>}</code></dt><dd><p>OAuth 2 parameters.</p></dd></dl><dl><dt class="spec value" id="val-client_id"><a href="#val-client_id" class="anchor"></a><code><span class="keyword">val</span> client_id : <span><span>(<a href="index.html#type-oauth2_config">oauth2_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth2 client ID lens.</p></dd></dl><dl><dt class="spec value" id="val-client_secret"><a href="#val-client_secret" class="anchor"></a><code><span class="keyword">val</span> client_secret : <span><span>(<a href="index.html#type-oauth2_config">oauth2_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth2 client secret lens.</p></dd></dl><dl><dt class="spec value" id="val-refresh_access_token"><a href="#val-refresh_access_token" class="anchor"></a><code><span class="keyword">val</span> refresh_access_token : <span><span>(<a href="index.html#type-oauth2_config">oauth2_config</a>, <span><span>(unit <span>&#45;&gt;</span> string)</span> option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth2 optional external token refresh function lens.</p></dd></dl><dl><dt class="spec type" id="type-oauth2_service_account_config"><a href="#type-oauth2_service_account_config" class="anchor"></a><code><span class="keyword">type</span> oauth2_service_account_config</code><code> = </code><code>{</code><table class="record"><tr id="type-oauth2_service_account_config.service_account_credentials_json" class="anchored"><td class="def field"><a href="#type-oauth2_service_account_config.service_account_credentials_json" class="anchor"></a><code>service_account_credentials_json : string;</code></td><td class="doc"><p>Service account credentials JSON file content.</p></td></tr><tr id="type-oauth2_service_account_config.scopes" class="anchored"><td class="def field"><a href="#type-oauth2_service_account_config.scopes" class="anchor"></a><code>scopes : <span>string list</span>;</code></td><td class="doc"><p>List of scopes that the application requests.</p></td></tr><tr id="type-oauth2_service_account_config.user_to_impersonate" class="anchored"><td class="def field"><a href="#type-oauth2_service_account_config.user_to_impersonate" class="anchor"></a><code>user_to_impersonate : <span>string option</span>;</code></td><td class="doc"><p>Optional user to impersonate (for G Suite domains).</p></td></tr><tr id="type-oauth2_service_account_config.refresh_service_account_access_token" class="anchored"><td class="def field"><a href="#type-oauth2_service_account_config.refresh_service_account_access_token" class="anchor"></a><code>refresh_service_account_access_token : <span><span>(unit <span>&#45;&gt;</span> string)</span> option</span>;</code></td><td class="doc"><p>Optional external function used to get new access tokens.</p></td></tr></table><code>}</code></dt><dd><p>OAuth 2 (for service accounts) parameters.</p></dd></dl><dl><dt class="spec value" id="val-service_account_credentials_json"><a href="#val-service_account_credentials_json" class="anchor"></a><code><span class="keyword">val</span> service_account_credentials_json : <span><span>(<a href="index.html#type-oauth2_service_account_config">oauth2_service_account_config</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>OAuth2 service account credentials JSON file content (lens).</p></dd></dl><dl><dt class="spec value" id="val-scopes"><a href="#val-scopes" class="anchor"></a><code><span class="keyword">val</span> scopes : <span><span>(<a href="index.html#type-oauth2_service_account_config">oauth2_service_account_config</a>, <span>string list</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>List of scopes that the application requests (lens).</p></dd></dl><dl><dt class="spec value" id="val-user_to_impersonate"><a href="#val-user_to_impersonate" class="anchor"></a><code><span class="keyword">val</span> user_to_impersonate : <span><span>(<a href="index.html#type-oauth2_service_account_config">oauth2_service_account_config</a>, <span>string option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Optional user to impersonate (lens).</p></dd></dl><dl><dt class="spec value" id="val-refresh_service_account_access_token"><a href="#val-refresh_service_account_access_token" class="anchor"></a><code><span class="keyword">val</span> refresh_service_account_access_token : <span><span>(<a href="index.html#type-oauth2_service_account_config">oauth2_service_account_config</a>, <span><span>(unit <span>&#45;&gt;</span> string)</span> option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Optional external function used to get new access tokens (lens).</p></dd></dl><dl><dt class="spec type" id="type-auth_config"><a href="#type-auth_config" class="anchor"></a><code><span class="keyword">type</span> auth_config</code><code> = </code><table class="variant"><tr id="type-auth_config.NoAuth" class="anchored"><td class="def constructor"><a href="#type-auth_config.NoAuth" class="anchor"></a><code>| </code><code><span class="constructor">NoAuth</span></code></td><td class="doc"><p>No authorization.</p></td></tr><tr id="type-auth_config.ClientLogin" class="anchored"><td class="def constructor"><a href="#type-auth_config.ClientLogin" class="anchor"></a><code>| </code><code><span class="constructor">ClientLogin</span> <span class="keyword">of</span> <a href="index.html#type-client_login_config">client_login_config</a></code></td><td class="doc"><p>Client Login.</p></td></tr><tr id="type-auth_config.OAuth1" class="anchored"><td class="def constructor"><a href="#type-auth_config.OAuth1" class="anchor"></a><code>| </code><code><span class="constructor">OAuth1</span> <span class="keyword">of</span> <a href="index.html#type-oauth1_config">oauth1_config</a></code></td><td class="doc"><p>OAuth1.</p></td></tr><tr id="type-auth_config.OAuth2" class="anchored"><td class="def constructor"><a href="#type-auth_config.OAuth2" class="anchor"></a><code>| </code><code><span class="constructor">OAuth2</span> <span class="keyword">of</span> <a href="index.html#type-oauth2_config">oauth2_config</a></code></td><td class="doc"><p>OAuth2.</p></td></tr><tr id="type-auth_config.OAuth2ServiceAccount" class="anchored"><td class="def constructor"><a href="#type-auth_config.OAuth2ServiceAccount" class="anchor"></a><code>| </code><code><span class="constructor">OAuth2ServiceAccount</span> <span class="keyword">of</span> <a href="index.html#type-oauth2_service_account_config">oauth2_service_account_config</a></code></td><td class="doc"><p>OAuth2 for service accounts.</p></td></tr></table></dt><dd><p>Authorization method.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.application_name" class="anchored"><td class="def field"><a href="#type-t.application_name" class="anchor"></a><code>application_name : string;</code></td><td class="doc"><p>Application name, used to build User-Agent HTTP header.</p></td></tr><tr id="type-t.debug" class="anchored"><td class="def field"><a href="#type-t.debug" class="anchor"></a><code>debug : <span><a href="index.html#type-debug_function">debug_function</a> option</span>;</code></td><td class="doc"><p>Debug function used to dump HTTP session. Use <code>None</code> to disable debug output.</p></td></tr><tr id="type-t.timeout" class="anchored"><td class="def field"><a href="#type-t.timeout" class="anchor"></a><code>timeout : <span>int option</span>;</code></td><td class="doc"><p>Global timeout. <code>None</code> defaults to no timeout.</p></td></tr><tr id="type-t.connect_timeout" class="anchored"><td class="def field"><a href="#type-t.connect_timeout" class="anchor"></a><code>connect_timeout : <span>int option</span>;</code></td><td class="doc"><p>Connection timeout. <code>None</code> defaults to 300 seconds.</p></td></tr><tr id="type-t.compress" class="anchored"><td class="def field"><a href="#type-t.compress" class="anchor"></a><code>compress : bool;</code></td><td class="doc"><p>Compress requests. (Not yet supported)</p></td></tr><tr id="type-t.auth" class="anchored"><td class="def field"><a href="#type-t.auth" class="anchor"></a><code>auth : <a href="index.html#type-auth_config">auth_config</a>;</code></td><td class="doc"><p>Authorization configuration.</p></td></tr><tr id="type-t.upload_chunk_size" class="anchored"><td class="def field"><a href="#type-t.upload_chunk_size" class="anchor"></a><code>upload_chunk_size : int;</code></td><td class="doc"><p>Chunk default size (in bytes) used by resumable upload. Should be a multiple of 512KB.</p></td></tr><tr id="type-t.max_send_speed" class="anchored"><td class="def field"><a href="#type-t.max_send_speed" class="anchor"></a><code>max_send_speed : int64;</code></td><td class="doc"><p>If an upload exceeds this speed (counted in bytes per second) on cumulative average during the transfer, the transfer will pause to keep the average rate less than or equal to the parameter value. Defaults to unlimited speed.</p></td></tr><tr id="type-t.max_recv_speed" class="anchored"><td class="def field"><a href="#type-t.max_recv_speed" class="anchor"></a><code>max_recv_speed : int64;</code></td><td class="doc"><p>If a download exceeds this speed (counted in bytes per second) on cumulative average during the transfer, the transfer will pause to keep the average rate less than or equal to the parameter value. Defaults to unlimited speed.</p></td></tr><tr id="type-t.low_speed_limit" class="anchored"><td class="def field"><a href="#type-t.low_speed_limit" class="anchor"></a><code>low_speed_limit : int;</code></td><td class="doc"><p>It contains the average transfer speed in bytes per second that the transfer should be below during <code>low_speed_time</code> seconds for libcurl to consider it to be too slow and abort. Defaults to 0 (disabled).</p></td></tr><tr id="type-t.low_speed_time" class="anchored"><td class="def field"><a href="#type-t.low_speed_time" class="anchor"></a><code>low_speed_time : int;</code></td><td class="doc"><p>It contains the time in number seconds that the transfer speed should be below the <code>low_speed_limit</code> for the library to consider it too slow and abort. Defaults to 0 (disabled).</p></td></tr><tr id="type-t.curl_no_signal" class="anchored"><td class="def field"><a href="#type-t.curl_no_signal" class="anchor"></a><code>curl_no_signal : bool;</code></td><td class="doc"><p>If <code>true</code>, libcurl will not use any functions that install signal handlers or any functions that cause signals to be sent to the process. This option is here to allow multi-threaded unix applications to still set/use all timeout options etc, without risking getting signals. Defaults to <code>true</code>.</p></td></tr><tr id="type-t.proxy" class="anchored"><td class="def field"><a href="#type-t.proxy" class="anchor"></a><code>proxy : <span>string option</span>;</code></td><td class="doc"><p>Set the proxy to use. The parameter should be a string holding the host name or dotted numerical IP address. A numerical IPv6 address must be written within brackets. Defaults to <code>None</code>. To specify port number in this string, append <code>:port</code> to the end of the host name.</p></td></tr><tr id="type-t.ssl_verifypeer" class="anchored"><td class="def field"><a href="#type-t.ssl_verifypeer" class="anchor"></a><code>ssl_verifypeer : bool;</code></td><td class="doc"><p>When <code>ssl_verifypeer</code> is enabled, and the verification fails to prove that the certificate is authentic, the connection fails. When the option is disabled, the peer certificate verification succeeds regardless. Defaults to <code>true</code>.</p></td></tr></table><code>}</code></dt><dd><p>Library configuration.</p></dd></dl><dl><dt class="spec value" id="val-application_name"><a href="#val-application_name" class="anchor"></a><code><span class="keyword">val</span> application_name : <span><span>(<a href="index.html#type-t">t</a>, string)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Application name lens.</p></dd></dl><dl><dt class="spec value" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span class="keyword">val</span> debug : <span><span>(<a href="index.html#type-t">t</a>, <span><a href="index.html#type-debug_function">debug_function</a> option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Debug function lens.</p></dd></dl><dl><dt class="spec value" id="val-timeout"><a href="#val-timeout" class="anchor"></a><code><span class="keyword">val</span> timeout : <span><span>(<a href="index.html#type-t">t</a>, <span>int option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Timeout lens.</p></dd></dl><dl><dt class="spec value" id="val-connect_timeout"><a href="#val-connect_timeout" class="anchor"></a><code><span class="keyword">val</span> connect_timeout : <span><span>(<a href="index.html#type-t">t</a>, <span>int option</span>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Connection timeout lens.</p></dd></dl><dl><dt class="spec value" id="val-compress"><a href="#val-compress" class="anchor"></a><code><span class="keyword">val</span> compress : <span><span>(<a href="index.html#type-t">t</a>, bool)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Compression flag lens.</p></dd></dl><dl><dt class="spec value" id="val-auth"><a href="#val-auth" class="anchor"></a><code><span class="keyword">val</span> auth : <span><span>(<a href="index.html#type-t">t</a>, <a href="index.html#type-auth_config">auth_config</a>)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Authorization configuration lens.</p></dd></dl><dl><dt class="spec value" id="val-upload_chunk_size"><a href="#val-upload_chunk_size" class="anchor"></a><code><span class="keyword">val</span> upload_chunk_size : <span><span>(<a href="index.html#type-t">t</a>, int)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Upload chunk size lens.</p></dd></dl><dl><dt class="spec value" id="val-max_send_speed"><a href="#val-max_send_speed" class="anchor"></a><code><span class="keyword">val</span> max_send_speed : <span><span>(<a href="index.html#type-t">t</a>, int64)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Max send speed lens.</p></dd></dl><dl><dt class="spec value" id="val-max_recv_speed"><a href="#val-max_recv_speed" class="anchor"></a><code><span class="keyword">val</span> max_recv_speed : <span><span>(<a href="index.html#type-t">t</a>, int64)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Max receive speed lens.</p></dd></dl><dl><dt class="spec value" id="val-low_speed_limit"><a href="#val-low_speed_limit" class="anchor"></a><code><span class="keyword">val</span> low_speed_limit : <span><span>(<a href="index.html#type-t">t</a>, int)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Low speed limit lens.</p></dd></dl><dl><dt class="spec value" id="val-low_speed_time"><a href="#val-low_speed_time" class="anchor"></a><code><span class="keyword">val</span> low_speed_time : <span><span>(<a href="index.html#type-t">t</a>, int)</span> <a href="../GapiLens/index.html#type-t">GapiLens.t</a></span></code></dt><dd><p>Low speed time lens.</p></dd></dl><dl><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : <a href="index.html#type-t">t</a></code></dt><dd><p>Default configuration.</p><pre><code class="ml">let default = {
  application_name = &quot;gapi-ocaml&quot;;
  debug = None;
  timeout = None;
  connect_timeout = None;
  compress = true;
  auth = NoAuth;
  upload_chunk_size = 10485760; (* 10MB *)
  max_send_speed = 0L;
  max_recv_speed = 0L;
  low_speed_limit = 0;
  low_speed_time = 0;
 }</code></pre></dd></dl><dl><dt class="spec value" id="val-default_debug"><a href="#val-default_debug" class="anchor"></a><code><span class="keyword">val</span> default_debug : <a href="index.html#type-t">t</a></code></dt><dd><p>Default configuration with debug output enabled.</p><pre><code class="ml">let default_debug = {
  application_name = &quot;gapi-ocaml&quot;;
  debug = Some Standard;
  timeout = None;
  connect_timeout = None;
  compress = false;
  auth = NoAuth;
  upload_chunk_size = 10485760; (* 10MB *)
  max_send_speed = 0L;
  max_recv_speed = 0L;
  low_speed_limit = 0;
  low_speed_time = 0;
 }</code></pre></dd></dl></div></body></html>